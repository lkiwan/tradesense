# TradeSense - Professional Upgrade User Map & Architecture

**Version:** 2.0 (Proposed)
**Date:** December 2024
**Status:** Upgrade Roadmap

---

## Table of Contents
1. [Upgraded User Journey](#1-upgraded-user-journey)
2. [New Features Overview](#2-new-features-overview)
3. [Enhanced Authentication Flow](#3-enhanced-authentication-flow)
4. [Advanced Trading System](#4-advanced-trading-system)
5. [Social Trading Schema](#5-social-trading-schema)
6. [Enhanced Revenue Streams](#6-enhanced-revenue-streams)
7. [Upgraded Database Schema](#7-upgraded-database-schema)
8. [New API Endpoints](#8-new-api-endpoints)
9. [Infrastructure Upgrades](#9-infrastructure-upgrades)
10. [Implementation Roadmap](#10-implementation-roadmap)

---

## 1. Upgraded User Journey

### Enhanced User Flow Diagram (v2.0)

```
┌─────────────────────────────────────────────────────────────────────────────────────┐
│                      TRADESENSE PRO USER JOURNEY MAP                                 │
│                              (Upgraded Version 2.0)                                  │
└─────────────────────────────────────────────────────────────────────────────────────┘

                                 ┌──────────────────┐
                                 │    INTERNET      │
                                 │     VISITOR      │
                                 └────────┬─────────┘
                                          │
          ┌───────────────────────────────┼───────────────────────────────┐
          │                               │                               │
          ▼                               ▼                               ▼
┌─────────────────┐            ┌─────────────────┐            ┌─────────────────┐
│  DISCOVERY      │            │   EDUCATION     │            │   SOCIAL PROOF  │
│                 │            │                 │            │                 │
│ • /pricing      │            │ • /academy      │            │ • /leaderboard  │
│ • /how-it-works │            │ • /news         │            │ • /hall-of-fame │
│ • /calendar     │            │ • /blog    [NEW]│            │ • /traders [NEW]│
│ • /partners     │            │ • /webinars[NEW]│            │ • /reviews [NEW]│
│ • /compare [NEW]│            │ • /faq          │            │                 │
└────────┬────────┘            └─────────────────┘            └─────────────────┘
         │
         │ ◄─── Enhanced conversion funnel
         ▼
┌─────────────────────────────────────────────────────────────────────────────────────┐
│                         ENHANCED AUTHENTICATION LAYER                                │
│                                                                                      │
│  ┌─────────────────────────────────────────────────────────────────────────────┐   │
│  │                          REGISTRATION FLOW                                   │   │
│  │                                                                              │   │
│  │   ┌─────────────┐    ┌─────────────┐    ┌─────────────┐    ┌─────────────┐  │   │
│  │   │   STEP 1    │───►│   STEP 2    │───►│   STEP 3    │───►│   STEP 4    │  │   │
│  │   │  Basic Info │    │  Email      │    │  KYC        │    │  2FA Setup  │  │   │
│  │   │             │    │  Verify     │    │  Verify     │    │  (Optional) │  │   │
│  │   │ • username  │    │             │    │             │    │             │  │   │
│  │   │ • email     │    │ • OTP sent  │    │ • ID Upload │    │ • TOTP      │  │   │
│  │   │ • password  │    │ • Confirm   │    │ • Face      │    │ • SMS       │  │   │
│  │   │ • phone[NEW]│    │   code      │    │   Verify    │    │ • Backup    │  │   │
│  │   │ • country   │    │             │    │ • Address   │    │   codes     │  │   │
│  │   │   [NEW]     │    │             │    │   proof     │    │             │  │   │
│  │   └─────────────┘    └─────────────┘    └─────────────┘    └─────────────┘  │   │
│  │                                                                              │   │
│  └──────────────────────────────────────────────────────────────────────────────┘   │
│                                                                                      │
│  ┌─────────────────────────────────────────────────────────────────────────────┐   │
│  │                            LOGIN FLOW                                        │   │
│  │                                                                              │   │
│  │   ┌─────────────┐    ┌─────────────┐    ┌─────────────┐                     │   │
│  │   │ Credentials │───►│  2FA Check  │───►│  Device     │                     │   │
│  │   │             │    │  (if setup) │    │  Trust      │                     │   │
│  │   │ • email     │    │             │    │             │                     │   │
│  │   │ • password  │    │ • TOTP code │    │ • New device│                     │   │
│  │   │ • biometric │    │ • SMS code  │    │   alert     │                     │   │
│  │   │   [NEW]     │    │ • Hardware  │    │ • Remember  │                     │   │
│  │   │             │    │   key       │    │   device    │                     │   │
│  │   └─────────────┘    └─────────────┘    └─────────────┘                     │   │
│  │                                                                              │   │
│  └──────────────────────────────────────────────────────────────────────────────┘   │
│                                                                                      │
└─────────────────────────────────────────────────────────────────────────────────────┘
                                       │
                                       ▼
┌─────────────────────────────────────────────────────────────────────────────────────┐
│                           CHALLENGE ACQUISITION                                      │
│                                                                                      │
│    ┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐               │
│    │   FREE TRIAL    │    │   PAID PLAN     │    │  SUBSCRIPTION   │               │
│    │                 │    │                 │    │     [NEW]       │               │
│    │ • 7-day trial   │    │ • One-time      │    │                 │               │
│    │ • $5K demo      │    │   purchase      │    │ • Signal sub    │               │
│    │ • PayPal auth   │    │ • $5K - $200K   │    │   $29/mo        │               │
│    │                 │    │ • 3 models      │    │ • Premium AI    │               │
│    │                 │    │                 │    │   $49/mo        │               │
│    │                 │    │                 │    │ • Trading room  │               │
│    │                 │    │                 │    │   $99/mo        │               │
│    │                 │    │                 │    │ • Mentorship    │               │
│    │                 │    │                 │    │   $199/mo       │               │
│    └────────┬────────┘    └────────┬────────┘    └────────┬────────┘               │
│             │                      │                      │                         │
│             └──────────────────────┼──────────────────────┘                         │
│                                    │                                                │
│                                    ▼                                                │
│    ┌─────────────────────────────────────────────────────────────────────────┐     │
│    │                      ENHANCED CHECKOUT [NEW]                             │     │
│    │                                                                          │     │
│    │   Payment Methods:              Discount Options:                        │     │
│    │   ┌──────────────┐             ┌──────────────┐                         │     │
│    │   │ • CMI Card   │             │ • Offer code │                         │     │
│    │   │ • PayPal     │             │ • Referral   │                         │     │
│    │   │ • Crypto     │             │   discount   │                         │     │
│    │   │ • Bank Wire  │             │ • Points     │                         │     │
│    │   │   [NEW]      │             │   redemption │                         │     │
│    │   │ • Apple Pay  │             │ • Bundle     │                         │     │
│    │   │   [NEW]      │             │   discount   │                         │     │
│    │   │ • Google Pay │             │              │                         │     │
│    │   │   [NEW]      │             │              │                         │     │
│    │   └──────────────┘             └──────────────┘                         │     │
│    │                                                                          │     │
│    └──────────────────────────────────────────────────────────────────────────┘     │
│                                                                                      │
└─────────────────────────────────────────────────────────────────────────────────────┘
                                       │
                                       ▼
┌─────────────────────────────────────────────────────────────────────────────────────┐
│                        ENHANCED CHALLENGE LIFECYCLE                                  │
│                                                                                      │
│  ┌─────────────────────────────────────────────────────────────────────────────┐   │
│  │                      PHASE PROGRESSION WITH ADD-ONS                          │   │
│  │                                                                              │   │
│  │   ┌─────────┐      ┌─────────────┐      ┌──────────────┐      ┌─────────┐  │   │
│  │   │  TRIAL  │ ───► │ EVALUATION  │ ───► │ VERIFICATION │ ───► │ FUNDED  │  │   │
│  │   └────┬────┘      └──────┬──────┘      └──────┬───────┘      └────┬────┘  │   │
│  │        │                  │                    │                   │       │   │
│  │        ▼                  ▼                    ▼                   ▼       │   │
│  │   ┌─────────┐      ┌─────────────┐      ┌──────────────┐      ┌─────────┐  │   │
│  │   │ Expired │      │   Failed    │      │    Failed    │      │ Scale   │  │   │
│  │   │    │    │      │      │      │      │       │      │      │ Up [NEW]│  │   │
│  │   │    ▼    │      │      ▼      │      │       ▼      │      │         │  │   │
│  │   │ ┌─────┐ │      │ ┌─────────┐ │      │ ┌──────────┐ │      │ Profit  │  │   │
│  │   │ │ BUY │ │      │ │  RESET  │ │      │ │  RESET   │ │      │ split   │  │   │
│  │   │ │PLAN │ │      │ │   10%   │ │      │ │   10%    │ │      │ 80%→90% │  │   │
│  │   │ └─────┘ │      │ │discount │ │      │ │ discount │ │      │         │  │   │
│  │   │         │      │ └─────────┘ │      │ └──────────┘ │      │ Account │  │   │
│  │   │         │      │             │      │              │      │ upgrade │  │   │
│  │   │         │      │ ┌─────────┐ │      │ ┌──────────┐ │      │ $100K → │  │   │
│  │   │         │      │ │EXTENSION│ │      │ │ EXTENSION│ │      │ $200K   │  │   │
│  │   │         │      │ │ +30 days│ │      │ │  +30 days│ │      │         │  │   │
│  │   │         │      │ │  [NEW]  │ │      │ │   [NEW]  │ │      │         │  │   │
│  │   │         │      │ └─────────┘ │      │ └──────────┘ │      │         │  │   │
│  │   └─────────┘      └─────────────┘      └──────────────┘      └─────────┘  │   │
│  │                                                                            │   │
│  └────────────────────────────────────────────────────────────────────────────┘   │
│                                                                                      │
└─────────────────────────────────────────────────────────────────────────────────────┘
                                       │
                                       ▼
┌─────────────────────────────────────────────────────────────────────────────────────┐
│                          ENHANCED TRADING DASHBOARD                                  │
│                                                                                      │
│  ┌─────────────────────────────────────────────────────────────────────────────┐   │
│  │                              /accounts (v2.0)                                │   │
│  │                                                                              │   │
│  │   ┌────────────────────────────────────────────────────────────────────┐    │   │
│  │   │                    PROFESSIONAL TRADING INTERFACE                   │    │   │
│  │   │                                                                     │    │   │
│  │   │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌───────────┐  │    │   │
│  │   │  │   CHARTS    │  │   ORDER     │  │  POSITIONS  │  │   TRADE   │  │    │   │
│  │   │  │             │  │   BOOK      │  │             │  │   JOURNAL │  │    │   │
│  │   │  │ • Multi-    │  │   [NEW]     │  │ • Open      │  │   [NEW]   │  │    │   │
│  │   │  │   chart     │  │             │  │ • Closed    │  │           │  │    │   │
│  │   │  │   layouts   │  │ • Depth     │  │ • P&L       │  │ • Notes   │  │    │   │
│  │   │  │ • Drawing   │  │ • Volume    │  │ • Risk      │  │ • Tags    │  │    │   │
│  │   │  │   tools     │  │ • Orders    │  │ • Analytics │  │ • Stats   │  │    │   │
│  │   │  │ • Indicators│  │             │  │             │  │ • Export  │  │    │   │
│  │   │  │ • Templates │  │             │  │             │  │           │  │    │   │
│  │   │  └─────────────┘  └─────────────┘  └─────────────┘  └───────────┘  │    │   │
│  │   │                                                                     │    │   │
│  │   │  ┌─────────────────────────────────────────────────────────────┐   │    │   │
│  │   │  │                    ADVANCED ORDER TYPES [NEW]                │   │    │   │
│  │   │  │                                                              │   │    │   │
│  │   │  │  • One-Click Trading        • Trailing Stop Loss            │   │    │   │
│  │   │  │  • OCO Orders               • Bracket Orders                │   │    │   │
│  │   │  │  • Scaled Orders            • Time-based Orders             │   │    │   │
│  │   │  │  • Hotkey Trading           • Order Templates               │   │    │   │
│  │   │  │                                                              │   │    │   │
│  │   │  └──────────────────────────────────────────────────────────────┘   │    │   │
│  │   │                                                                     │    │   │
│  │   └─────────────────────────────────────────────────────────────────────┘    │   │
│  │                                                                              │   │
│  └──────────────────────────────────────────────────────────────────────────────┘   │
│                                                                                      │
└─────────────────────────────────────────────────────────────────────────────────────┘
                                       │
                                       ▼
┌─────────────────────────────────────────────────────────────────────────────────────┐
│                            SOCIAL TRADING HUB [NEW]                                  │
│                                                                                      │
│  ┌─────────────────────────────────────────────────────────────────────────────┐   │
│  │                                                                              │   │
│  │   ┌─────────────┐    ┌─────────────┐    ┌─────────────┐    ┌─────────────┐  │   │
│  │   │   TRADER    │    │    COPY     │    │   TRADING   │    │   SOCIAL    │  │   │
│  │   │  PROFILES   │    │   TRADING   │    │    IDEAS    │    │    FEED     │  │   │
│  │   │             │    │             │    │             │    │             │  │   │
│  │   │ • Stats     │    │ • Follow    │    │ • Post      │    │ • Updates   │  │   │
│  │   │ • History   │    │   traders   │    │   analysis  │    │ • Comments  │  │   │
│  │   │ • Badges    │    │ • Auto-copy │    │ • Charts    │    │ • Likes     │  │   │
│  │   │ • Reviews   │    │ • Risk      │    │ • Discuss   │    │ • Share     │  │   │
│  │   │ • Verified  │    │   settings  │    │ • Vote      │    │ • Trending  │  │   │
│  │   │             │    │ • Portfolio │    │             │    │             │  │   │
│  │   └─────────────┘    └─────────────┘    └─────────────┘    └─────────────┘  │   │
│  │                                                                              │   │
│  └──────────────────────────────────────────────────────────────────────────────┘   │
│                                                                                      │
└─────────────────────────────────────────────────────────────────────────────────────┘
                                       │
                                       ▼
┌─────────────────────────────────────────────────────────────────────────────────────┐
│                        ENHANCED REWARDS & ENGAGEMENT                                 │
│                                                                                      │
│  ┌─────────────────────────────────────────────────────────────────────────────┐   │
│  │                                                                              │   │
│  │   ┌─────────────┐    ┌─────────────┐    ┌─────────────┐    ┌─────────────┐  │   │
│  │   │  MULTI-TIER │    │   POINTS    │    │   TRADING   │    │  SEASONAL   │  │   │
│  │   │  AFFILIATE  │    │ REDEMPTION  │    │ COMPETITIONS│    │   EVENTS    │  │   │
│  │   │             │    │    [NEW]    │    │             │    │    [NEW]    │  │   │
│  │   │ Tier 1: 15% │    │             │    │ • Weekly    │    │             │  │   │
│  │   │ Tier 2: 5%  │    │ • Discounts │    │ • Monthly   │    │ • Holiday   │  │   │
│  │   │   [NEW]     │    │ • Free      │    │ • Special   │    │   promos    │  │   │
│  │   │             │    │   months    │    │ • Team      │    │ • Flash     │  │   │
│  │   │ • Dashboard │    │ • Merch     │    │   battles   │    │   sales     │  │   │
│  │   │ • Materials │    │ • Upgrades  │    │             │    │ • Bonuses   │  │   │
│  │   │ • Tracking  │    │             │    │             │    │             │  │   │
│  │   └─────────────┘    └─────────────┘    └─────────────┘    └─────────────┘  │   │
│  │                                                                              │   │
│  └──────────────────────────────────────────────────────────────────────────────┘   │
│                                                                                      │
└─────────────────────────────────────────────────────────────────────────────────────┘
```

---

## 2. New Features Overview

### Feature Comparison: Current vs Pro

```
┌─────────────────────────────────────────────────────────────────────────────────────┐
│                         FEATURE COMPARISON MATRIX                                    │
├─────────────────────────────────┬─────────────────┬─────────────────┬───────────────┤
│ Feature                         │ Current (v1.0)  │ Pro (v2.0)      │ Priority      │
├─────────────────────────────────┼─────────────────┼─────────────────┼───────────────┤
│ AUTHENTICATION                  │                 │                 │               │
│ ├─ Email/Password               │ ✓               │ ✓               │ -             │
│ ├─ Email Verification           │ ✗               │ ✓               │ P1            │
│ ├─ 2FA (TOTP/SMS)               │ ✗               │ ✓               │ P1            │
│ ├─ Biometric Login              │ ✗               │ ✓               │ P3            │
│ ├─ Device Management            │ ✗               │ ✓               │ P2            │
│ └─ SSO (Google/Apple)           │ ✗               │ ✓               │ P3            │
├─────────────────────────────────┼─────────────────┼─────────────────┼───────────────┤
│ KYC/COMPLIANCE                  │                 │                 │               │
│ ├─ ID Verification              │ ✗               │ ✓               │ P1            │
│ ├─ Face Verification            │ ✗               │ ✓               │ P1            │
│ ├─ Address Proof                │ ✗               │ ✓               │ P1            │
│ └─ AML Screening                │ ✗               │ ✓               │ P2            │
├─────────────────────────────────┼─────────────────┼─────────────────┼───────────────┤
│ TRADING                         │                 │                 │               │
│ ├─ Market Orders                │ ✓               │ ✓               │ -             │
│ ├─ Limit Orders                 │ ✓               │ ✓               │ -             │
│ ├─ Stop Loss/Take Profit        │ ✓               │ ✓               │ -             │
│ ├─ Trailing Stop                │ ✗               │ ✓               │ P2            │
│ ├─ OCO Orders                   │ ✗               │ ✓               │ P2            │
│ ├─ One-Click Trading            │ ✗               │ ✓               │ P2            │
│ ├─ Hotkeys                      │ ✗               │ ✓               │ P3            │
│ ├─ Trade Journal                │ ✗               │ ✓               │ P2            │
│ └─ MT4/MT5 Integration          │ ✗               │ ✓               │ P2            │
├─────────────────────────────────┼─────────────────┼─────────────────┼───────────────┤
│ CHARTS                          │                 │                 │               │
│ ├─ Basic OHLCV                  │ ✓               │ ✓               │ -             │
│ ├─ Multi-Chart Layout           │ ✗               │ ✓               │ P2            │
│ ├─ Drawing Tools                │ ✗               │ ✓               │ P2            │
│ ├─ Custom Indicators            │ ✗               │ ✓               │ P3            │
│ └─ Chart Templates              │ ✗               │ ✓               │ P3            │
├─────────────────────────────────┼─────────────────┼─────────────────┼───────────────┤
│ SOCIAL                          │                 │                 │               │
│ ├─ Leaderboard                  │ ✓               │ ✓               │ -             │
│ ├─ Trader Profiles              │ ✗               │ ✓               │ P2            │
│ ├─ Copy Trading                 │ ✗               │ ✓               │ P2            │
│ ├─ Trading Ideas                │ ✗               │ ✓               │ P3            │
│ ├─ Social Feed                  │ ✗               │ ✓               │ P3            │
│ └─ Follow System                │ ✗               │ ✓               │ P2            │
├─────────────────────────────────┼─────────────────┼─────────────────┼───────────────┤
│ MONETIZATION                    │                 │                 │               │
│ ├─ One-time Purchase            │ ✓               │ ✓               │ -             │
│ ├─ Subscriptions                │ ✗               │ ✓               │ P2            │
│ ├─ Challenge Reset (paid)       │ ✗               │ ✓               │ P2            │
│ ├─ Time Extension (paid)        │ ✗               │ ✓               │ P2            │
│ ├─ Points Redemption            │ ✗               │ ✓               │ P3            │
│ └─ Multi-tier Affiliate         │ ✗               │ ✓               │ P2            │
├─────────────────────────────────┼─────────────────┼─────────────────┼───────────────┤
│ NOTIFICATIONS                   │                 │                 │               │
│ ├─ In-App                       │ ✓               │ ✓               │ -             │
│ ├─ Email                        │ ✗               │ ✓               │ P1            │
│ ├─ Push (Mobile)                │ ✗               │ ✓               │ P2            │
│ ├─ SMS                          │ ✗               │ ✓               │ P3            │
│ └─ Webhook                      │ ✗               │ ✓               │ P3            │
├─────────────────────────────────┼─────────────────┼─────────────────┼───────────────┤
│ MOBILE                          │                 │                 │               │
│ ├─ Responsive Web               │ ✓               │ ✓               │ -             │
│ ├─ iOS App                      │ ✗               │ ✓               │ P2            │
│ ├─ Android App                  │ ✗               │ ✓               │ P2            │
│ └─ Biometric Auth               │ ✗               │ ✓               │ P3            │
├─────────────────────────────────┼─────────────────┼─────────────────┼───────────────┤
│ INFRASTRUCTURE                  │                 │                 │               │
│ ├─ SQLite Database              │ ✓               │ ✗               │ -             │
│ ├─ PostgreSQL                   │ ✗               │ ✓               │ P1            │
│ ├─ Redis Cache                  │ ✗               │ ✓               │ P1            │
│ ├─ Task Queue (Celery)          │ ✗               │ ✓               │ P1            │
│ ├─ CDN                          │ ✗               │ ✓               │ P2            │
│ └─ Load Balancer                │ ✗               │ ✓               │ P3            │
└─────────────────────────────────┴─────────────────┴─────────────────┴───────────────┘
```

---

## 3. Enhanced Authentication Flow

### Security-First Authentication Schema

```
┌─────────────────────────────────────────────────────────────────────────────────────┐
│                      ENHANCED AUTHENTICATION SCHEMA                                  │
└─────────────────────────────────────────────────────────────────────────────────────┘

                              ┌─────────────────┐
                              │   User Input    │
                              │  email/password │
                              └────────┬────────┘
                                       │
                                       ▼
                              ┌─────────────────┐
                              │  Rate Limiter   │
                              │  5 attempts/15m │
                              └────────┬────────┘
                                       │
                    ┌──────────────────┴──────────────────┐
                    │ Blocked                             │ OK
                    ▼                                     ▼
           ┌─────────────────┐                  ┌─────────────────┐
           │   Lockout       │                  │   Credential    │
           │   Response      │                  │   Validation    │
           │                 │                  └────────┬────────┘
           │   • Wait time   │                           │
           │   • Captcha     │              ┌────────────┴────────────┐
           └─────────────────┘              │ Invalid                 │ Valid
                                            ▼                         ▼
                                   ┌─────────────────┐      ┌─────────────────┐
                                   │   Failed        │      │   Check 2FA     │
                                   │   Attempt Log   │      │   Status        │
                                   └─────────────────┘      └────────┬────────┘
                                                                     │
                                            ┌────────────────────────┴────────────────────────┐
                                            │ 2FA Enabled                                    │ No 2FA
                                            ▼                                                ▼
                                   ┌─────────────────┐                             ┌─────────────────┐
                                   │   Request 2FA   │                             │   Device Check  │
                                   │   Code          │                             │                 │
                                   │                 │                             │ • Known device? │
                                   │   Methods:      │                             │ • Geo-location  │
                                   │   • TOTP app    │                             │ • IP analysis   │
                                   │   • SMS code    │                             └────────┬────────┘
                                   │   • Email code  │                                      │
                                   │   • Hardware key│                         ┌───────────┴───────────┐
                                   └────────┬────────┘                         │ Suspicious            │ Normal
                                            │                                  ▼                       ▼
                                            ▼                         ┌─────────────────┐   ┌─────────────────┐
                                   ┌─────────────────┐                │  Additional     │   │   Generate      │
                                   │   Verify 2FA    │                │  Verification   │   │   Tokens        │
                                   │   Code          │                │                 │   │                 │
                                   └────────┬────────┘                │  • Email alert  │   │  • Access JWT   │
                                            │                         │  • Confirm      │   │  • Refresh JWT  │
                                   ┌────────┴────────┐                │    new device   │   │  • Session ID   │
                                   │ Invalid         │ Valid          └────────┬────────┘   └────────┬────────┘
                                   ▼                 ▼                         │                     │
                          ┌─────────────────┐ ┌─────────────────┐              │                     │
                          │   Retry         │ │   Device Check  │              └──────────┬──────────┘
                          │   (max 3)       │ └────────┬────────┘                         │
                          └─────────────────┘          │                                  ▼
                                                       └─────────────────────────► ┌─────────────────┐
                                                                                   │   Login Success │
                                                                                   │                 │
                                                                                   │  • Audit log    │
                                                                                   │  • Session      │
                                                                                   │    created      │
                                                                                   │  • Redirect to  │
                                                                                   │    dashboard    │
                                                                                   └─────────────────┘


┌─────────────────────────────────────────────────────────────────────────────────────┐
│                              KYC VERIFICATION FLOW                                   │
└─────────────────────────────────────────────────────────────────────────────────────┘

┌─────────────┐    ┌─────────────┐    ┌─────────────┐    ┌─────────────┐    ┌─────────────┐
│   TIER 0    │───►│   TIER 1    │───►│   TIER 2    │───►│   TIER 3    │───►│   VERIFIED  │
│  Unverified │    │   Basic     │    │   Standard  │    │   Enhanced  │    │   Full      │
└─────────────┘    └─────────────┘    └─────────────┘    └─────────────┘    └─────────────┘
      │                  │                  │                  │                  │
      ▼                  ▼                  ▼                  ▼                  ▼
┌─────────────┐    ┌─────────────┐    ┌─────────────┐    ┌─────────────┐    ┌─────────────┐
│ Limits:     │    │ Limits:     │    │ Limits:     │    │ Limits:     │    │ Limits:     │
│             │    │             │    │             │    │             │    │             │
│ • No payout │    │ • $500/mo   │    │ • $5,000/mo │    │ • $50,000/mo│    │ • Unlimited │
│ • Trial only│    │   payout    │    │   payout    │    │   payout    │    │   payout    │
│             │    │             │    │             │    │             │    │             │
│ Required:   │    │ Required:   │    │ Required:   │    │ Required:   │    │ Required:   │
│ • Email     │    │ • Phone     │    │ • ID doc    │    │ • Face      │    │ • Address   │
│             │    │ • Full name │    │             │    │   verify    │    │   proof     │
│             │    │ • Country   │    │             │    │             │    │ • Source of │
│             │    │             │    │             │    │             │    │   funds     │
└─────────────┘    └─────────────┘    └─────────────┘    └─────────────┘    └─────────────┘
```

---

## 4. Advanced Trading System

### MT4/MT5 Integration Schema

```
┌─────────────────────────────────────────────────────────────────────────────────────┐
│                         MT4/MT5 INTEGRATION ARCHITECTURE                             │
└─────────────────────────────────────────────────────────────────────────────────────┘

┌─────────────────┐                                           ┌─────────────────┐
│   TradeSense    │                                           │   MT4/MT5       │
│   Frontend      │                                           │   Server        │
└────────┬────────┘                                           └────────┬────────┘
         │                                                             │
         │  WebSocket/REST                                             │
         ▼                                                             │
┌─────────────────────────────────────────────────────────────────────────────────────┐
│                              TRADESENSE BACKEND                                      │
│                                                                                      │
│  ┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐                 │
│  │   Order         │    │   Position      │    │   Account       │                 │
│  │   Router        │    │   Manager       │    │   Sync          │                 │
│  └────────┬────────┘    └────────┬────────┘    └────────┬────────┘                 │
│           │                      │                      │                          │
│           └──────────────────────┼──────────────────────┘                          │
│                                  │                                                  │
│                                  ▼                                                  │
│  ┌─────────────────────────────────────────────────────────────────────────────┐   │
│  │                         BRIDGE SERVICE (MetaAPI)                             │   │
│  │                                                                              │   │
│  │   Functions:                                                                 │   │
│  │   • Account connection    • Real-time quotes    • Trade execution           │   │
│  │   • Position sync         • History sync        • Event streaming           │   │
│  │                                                                              │   │
│  └──────────────────────────────────────┬──────────────────────────────────────┘   │
│                                         │                                          │
└─────────────────────────────────────────┼──────────────────────────────────────────┘
                                          │
                                          │  MetaAPI Protocol
                                          ▼
                              ┌─────────────────────────┐
                              │      MT4/MT5 Server     │
                              │                         │
                              │   • Real execution      │
                              │   • Real spreads        │
                              │   • Real liquidity      │
                              └─────────────────────────┘


┌─────────────────────────────────────────────────────────────────────────────────────┐
│                         ADVANCED ORDER TYPES SCHEMA                                  │
└─────────────────────────────────────────────────────────────────────────────────────┘

┌──────────────────────────────────────────────────────────────────────────────────────┐
│                                ORDER TYPE HIERARCHY                                   │
│                                                                                       │
│   ┌─────────────────┐                                                                │
│   │   BASE ORDER    │                                                                │
│   │                 │                                                                │
│   │ • symbol        │                                                                │
│   │ • side          │                                                                │
│   │ • quantity      │                                                                │
│   │ • type          │                                                                │
│   └────────┬────────┘                                                                │
│            │                                                                         │
│   ┌────────┴────────────────────────────────────────────────────────────┐           │
│   │                │                │                │                  │           │
│   ▼                ▼                ▼                ▼                  ▼           │
│ ┌──────────┐  ┌──────────┐  ┌──────────┐  ┌──────────┐  ┌──────────────────┐       │
│ │  MARKET  │  │  LIMIT   │  │   STOP   │  │   OCO    │  │    BRACKET       │       │
│ │          │  │          │  │          │  │          │  │                  │       │
│ │ Execute  │  │ Execute  │  │ Execute  │  │ 2 orders │  │ Entry + SL + TP  │       │
│ │ at best  │  │ at price │  │ when     │  │ linked   │  │ as single unit   │       │
│ │ price    │  │ or better│  │ price    │  │ cancel   │  │                  │       │
│ │          │  │          │  │ reached  │  │ other    │  │                  │       │
│ └──────────┘  └──────────┘  └──────────┘  └──────────┘  └──────────────────┘       │
│                                                                                       │
│   ┌──────────────────────────────────────────────────────────────────────┐          │
│   │                      ADVANCED STOP TYPES                              │          │
│   │                                                                       │          │
│   │   ┌─────────────┐    ┌─────────────┐    ┌─────────────┐              │          │
│   │   │  TRAILING   │    │  BREAKEVEN  │    │  TIME-BASED │              │          │
│   │   │    STOP     │    │    STOP     │    │    STOP     │              │          │
│   │   │             │    │             │    │             │              │          │
│   │   │ Follow      │    │ Move SL to  │    │ Auto-close  │              │          │
│   │   │ price by    │    │ entry when  │    │ at specific │              │          │
│   │   │ X pips      │    │ +X profit   │    │ time        │              │          │
│   │   └─────────────┘    └─────────────┘    └─────────────┘              │          │
│   │                                                                       │          │
│   └───────────────────────────────────────────────────────────────────────┘          │
│                                                                                       │
└───────────────────────────────────────────────────────────────────────────────────────┘
```

---

## 5. Social Trading Schema

### Copy Trading Architecture

```
┌─────────────────────────────────────────────────────────────────────────────────────┐
│                           COPY TRADING ARCHITECTURE                                  │
└─────────────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────────────┐
│                              MASTER TRADER                                           │
│                                                                                      │
│   ┌─────────────────┐                                                               │
│   │   Trader A      │                                                               │
│   │   (Master)      │                                                               │
│   │                 │                                                               │
│   │   Stats:        │                                                               │
│   │   • Win rate    │                                                               │
│   │   • Profit %    │                                                               │
│   │   • Drawdown    │                                                               │
│   │   • Followers   │                                                               │
│   └────────┬────────┘                                                               │
│            │                                                                         │
│            │  Opens Trade                                                            │
│            ▼                                                                         │
│   ┌─────────────────┐                                                               │
│   │   BUY EURUSD    │                                                               │
│   │   1.0 lot       │                                                               │
│   │   @ 1.0850      │                                                               │
│   └────────┬────────┘                                                               │
│            │                                                                         │
└────────────┼────────────────────────────────────────────────────────────────────────┘
             │
             │  Signal Broadcast
             ▼
┌─────────────────────────────────────────────────────────────────────────────────────┐
│                           COPY TRADING ENGINE                                        │
│                                                                                      │
│   ┌─────────────────────────────────────────────────────────────────────────────┐   │
│   │                         SIGNAL PROCESSOR                                     │   │
│   │                                                                              │   │
│   │   1. Receive master trade                                                    │   │
│   │   2. Get all followers                                                       │   │
│   │   3. For each follower:                                                      │   │
│   │      a. Check copy settings                                                  │   │
│   │      b. Calculate lot size (proportional/fixed)                              │   │
│   │      c. Apply risk limits                                                    │   │
│   │      d. Execute copy trade                                                   │   │
│   │                                                                              │   │
│   └──────────────────────────────────┬──────────────────────────────────────────┘   │
│                                      │                                              │
└──────────────────────────────────────┼──────────────────────────────────────────────┘
                                       │
          ┌────────────────────────────┼────────────────────────────────┐
          │                            │                                │
          ▼                            ▼                                ▼
┌─────────────────┐          ┌─────────────────┐          ┌─────────────────┐
│   Follower 1    │          │   Follower 2    │          │   Follower 3    │
│                 │          │                 │          │                 │
│   Settings:     │          │   Settings:     │          │   Settings:     │
│   • Copy: 100%  │          │   • Copy: 50%   │          │   • Copy: Fixed │
│   • Max risk: 2%│          │   • Max risk: 1%│          │   • 0.1 lot     │
│                 │          │                 │          │                 │
│   Copy Trade:   │          │   Copy Trade:   │          │   Copy Trade:   │
│   BUY EURUSD    │          │   BUY EURUSD    │          │   BUY EURUSD    │
│   1.0 lot       │          │   0.5 lot       │          │   0.1 lot       │
└─────────────────┘          └─────────────────┘          └─────────────────┘


┌─────────────────────────────────────────────────────────────────────────────────────┐
│                           TRADER PROFILE SCHEMA                                      │
└─────────────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────────────┐
│                              TRADER PROFILE                                          │
│                                                                                      │
│   ┌─────────────────────────────────────────────────────────────────────────────┐   │
│   │  HEADER                                                                      │   │
│   │  ┌──────────┐  Username: TraderPro123                                       │   │
│   │  │  Avatar  │  Level: Diamond                                               │   │
│   │  │          │  Followers: 1,234                                             │   │
│   │  └──────────┘  Joined: Jan 2024                                             │   │
│   │                [Follow] [Copy] [Message]                                     │   │
│   └─────────────────────────────────────────────────────────────────────────────┘   │
│                                                                                      │
│   ┌─────────────────────────────────────────────────────────────────────────────┐   │
│   │  STATISTICS                                                                  │   │
│   │                                                                              │   │
│   │  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐    │   │
│   │  │  Total P&L   │  │  Win Rate    │  │  Max DD      │  │  Sharpe      │    │   │
│   │  │  +$45,230    │  │  68.5%       │  │  -12.3%      │  │  1.85        │    │   │
│   │  │  ▲ +15.2%    │  │              │  │              │  │              │    │   │
│   │  └──────────────┘  └──────────────┘  └──────────────┘  └──────────────┘    │   │
│   │                                                                              │   │
│   │  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐    │   │
│   │  │  Avg Trade   │  │  Total Trades│  │  Avg Hold    │  │  Profit Days │    │   │
│   │  │  +$125       │  │  1,245       │  │  4.2 hours   │  │  72%         │    │   │
│   │  └──────────────┘  └──────────────┘  └──────────────┘  └──────────────┘    │   │
│   │                                                                              │   │
│   └─────────────────────────────────────────────────────────────────────────────┘   │
│                                                                                      │
│   ┌─────────────────────────────────────────────────────────────────────────────┐   │
│   │  BADGES & ACHIEVEMENTS                                                       │   │
│   │                                                                              │   │
│   │  [Funded Trader] [Top 10] [100 Wins] [Verified] [Mentor] [Streak 30]       │   │
│   │                                                                              │   │
│   └─────────────────────────────────────────────────────────────────────────────┘   │
│                                                                                      │
│   ┌─────────────────────────────────────────────────────────────────────────────┐   │
│   │  EQUITY CURVE                                                                │   │
│   │                                                                              │   │
│   │      $50K ┤                                              ╭──────            │   │
│   │           │                                         ╭────╯                  │   │
│   │      $40K ┤                                    ╭────╯                       │   │
│   │           │                               ╭────╯                            │   │
│   │      $30K ┤                          ╭────╯                                 │   │
│   │           │                     ╭────╯                                      │   │
│   │      $20K ┤                ╭────╯                                           │   │
│   │           │           ╭────╯                                                │   │
│   │      $10K ┤      ╭────╯                                                     │   │
│   │           │ ╭────╯                                                          │   │
│   │        $0 ┼───────────────────────────────────────────────────────────      │   │
│   │           Jan    Feb    Mar    Apr    May    Jun    Jul    Aug              │   │
│   │                                                                              │   │
│   └─────────────────────────────────────────────────────────────────────────────┘   │
│                                                                                      │
│   ┌─────────────────────────────────────────────────────────────────────────────┐   │
│   │  RECENT TRADES                                                               │   │
│   │                                                                              │   │
│   │  Symbol    Side    Entry      Exit       P&L        Date                    │   │
│   │  EURUSD    BUY     1.0850    1.0920    +$700      Today                     │   │
│   │  GBPJPY    SELL    185.50    184.80    +$350      Yesterday                 │   │
│   │  XAUUSD    BUY     2045.00   2038.00   -$140      2 days ago                │   │
│   │                                                                              │   │
│   └─────────────────────────────────────────────────────────────────────────────┘   │
│                                                                                      │
└─────────────────────────────────────────────────────────────────────────────────────┘
```

---

## 6. Enhanced Revenue Streams

### Subscription & Monetization Schema

```
┌─────────────────────────────────────────────────────────────────────────────────────┐
│                        REVENUE STREAMS ARCHITECTURE                                  │
└─────────────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────────────┐
│                              REVENUE SOURCES                                         │
│                                                                                      │
│   ┌─────────────────────────────────────────────────────────────────────────────┐   │
│   │                         1. CHALLENGE PURCHASES                               │   │
│   │                            (One-time Revenue)                                │   │
│   │                                                                              │   │
│   │   Account Size     │  Stellar 1-Step  │  Stellar 2-Step  │  Stellar Lite   │   │
│   │   ─────────────────┼──────────────────┼──────────────────┼─────────────────│   │
│   │   $5,000           │  $59             │  $49             │  $39            │   │
│   │   $10,000          │  $99             │  $89             │  $69            │   │
│   │   $25,000          │  $199            │  $179            │  $149           │   │
│   │   $50,000          │  $299            │  $279            │  $249           │   │
│   │   $100,000         │  $499            │  $449            │  $399           │   │
│   │   $200,000         │  $999            │  $899            │  $799           │   │
│   │                                                                              │   │
│   └─────────────────────────────────────────────────────────────────────────────┘   │
│                                                                                      │
│   ┌─────────────────────────────────────────────────────────────────────────────┐   │
│   │                         2. SUBSCRIPTIONS [NEW]                               │   │
│   │                            (Recurring Revenue)                               │   │
│   │                                                                              │   │
│   │   ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐             │   │
│   │   │  Signal Basic   │  │  Signal Pro     │  │  Trading Room   │             │   │
│   │   │                 │  │                 │  │                 │             │   │
│   │   │  $29/month      │  │  $49/month      │  │  $99/month      │             │   │
│   │   │                 │  │                 │  │                 │             │   │
│   │   │  • 5 signals/day│  │  • Unlimited    │  │  • Live trading │             │   │
│   │   │  • Basic AI     │  │  • Advanced AI  │  │  • Voice chat   │             │   │
│   │   │  • Email alerts │  │  • Push alerts  │  │  • Screen share │             │   │
│   │   │                 │  │  • API access   │  │  • Mentorship   │             │   │
│   │   └─────────────────┘  └─────────────────┘  └─────────────────┘             │   │
│   │                                                                              │   │
│   │   ┌─────────────────┐                                                       │   │
│   │   │  Mentorship     │                                                       │   │
│   │   │                 │                                                       │   │
│   │   │  $199/month     │                                                       │   │
│   │   │                 │                                                       │   │
│   │   │  • 1-on-1 calls │                                                       │   │
│   │   │  • Trade review │                                                       │   │
│   │   │  • Strategy     │                                                       │   │
│   │   │  • Priority     │                                                       │   │
│   │   └─────────────────┘                                                       │   │
│   │                                                                              │   │
│   └─────────────────────────────────────────────────────────────────────────────┘   │
│                                                                                      │
│   ┌─────────────────────────────────────────────────────────────────────────────┐   │
│   │                         3. ADD-ON SALES [NEW]                                │   │
│   │                            (Upsell Revenue)                                  │   │
│   │                                                                              │   │
│   │   ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐             │   │
│   │   │  Challenge      │  │  Time           │  │  Account        │             │   │
│   │   │  Reset          │  │  Extension      │  │  Upgrade        │             │   │
│   │   │                 │  │                 │  │                 │             │   │
│   │   │  10% discount   │  │  $49/30 days    │  │  Pay difference │             │   │
│   │   │  on same plan   │  │                 │  │  + 10% fee      │             │   │
│   │   │                 │  │  Keep progress  │  │                 │             │   │
│   │   │  Reset balance  │  │  More time to   │  │  $25K → $50K    │             │   │
│   │   │  to initial     │  │  reach target   │  │  $50K → $100K   │             │   │
│   │   └─────────────────┘  └─────────────────┘  └─────────────────┘             │   │
│   │                                                                              │   │
│   └─────────────────────────────────────────────────────────────────────────────┘   │
│                                                                                      │
│   ┌─────────────────────────────────────────────────────────────────────────────┐   │
│   │                         4. AFFILIATE PROGRAM [ENHANCED]                      │   │
│   │                            (Partner Revenue)                                 │   │
│   │                                                                              │   │
│   │   ┌─────────────────────────────────────────────────────────────────────┐   │   │
│   │   │                      MULTI-TIER STRUCTURE                            │   │   │
│   │   │                                                                      │   │   │
│   │   │          Affiliate (You)                                             │   │   │
│   │   │               │                                                      │   │   │
│   │   │               │ Tier 1: 15% commission                               │   │   │
│   │   │               ▼                                                      │   │   │
│   │   │     ┌─────────────────┐                                              │   │   │
│   │   │     │  Direct Referral│──► Purchase $299 plan                        │   │   │
│   │   │     │  (Customer A)   │    You earn: $44.85                          │   │   │
│   │   │     └────────┬────────┘                                              │   │   │
│   │   │              │                                                       │   │   │
│   │   │              │ Tier 2: 5% commission                                 │   │   │
│   │   │              ▼                                                       │   │   │
│   │   │     ┌─────────────────┐                                              │   │   │
│   │   │     │  Sub-Referral   │──► Customer A refers B                       │   │   │
│   │   │     │  (Customer B)   │    B purchases $299                          │   │   │
│   │   │     └─────────────────┘    You earn: $14.95                          │   │   │
│   │   │                            Customer A earns: $44.85                  │   │   │
│   │   │                                                                      │   │   │
│   │   └──────────────────────────────────────────────────────────────────────┘   │   │
│   │                                                                              │   │
│   │   Affiliate Benefits:                                                        │   │
│   │   • Custom tracking dashboard                                                │   │
│   │   • Marketing materials                                                      │   │
│   │   • Weekly payouts (min $100)                                               │   │
│   │   • Performance bonuses                                                      │   │
│   │                                                                              │   │
│   └─────────────────────────────────────────────────────────────────────────────┘   │
│                                                                                      │
│   ┌─────────────────────────────────────────────────────────────────────────────┐   │
│   │                         5. COPY TRADING FEES [NEW]                           │   │
│   │                            (Platform Revenue)                                │   │
│   │                                                                              │   │
│   │   Master Trader Performance Fee: 20% of profits                              │   │
│   │   Platform Fee: 5% of performance fee (1% of profits)                        │   │
│   │                                                                              │   │
│   │   Example:                                                                   │   │
│   │   • Follower copies $10,000 allocation                                       │   │
│   │   • Monthly profit: $500                                                     │   │
│   │   • Master receives: $100 (20%)                                              │   │
│   │   • Platform receives: $5 (5% of $100)                                       │   │
│   │                                                                              │   │
│   └─────────────────────────────────────────────────────────────────────────────┘   │
│                                                                                      │
└─────────────────────────────────────────────────────────────────────────────────────┘
```

---

## 7. Upgraded Database Schema

### New Tables for Pro Features

```
┌─────────────────────────────────────────────────────────────────────────────────────┐
│                         NEW DATABASE TABLES (v2.0)                                   │
└─────────────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────────────┐
│                              AUTHENTICATION & SECURITY                               │
├─────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                      │
│  ┌─────────────────────────┐         ┌─────────────────────────┐                   │
│  │     TWO_FACTOR_AUTH     │         │     USER_SESSIONS       │                   │
│  ├─────────────────────────┤         ├─────────────────────────┤                   │
│  │ id (PK)                 │         │ id (PK)                 │                   │
│  │ user_id (FK)            │         │ user_id (FK)            │                   │
│  │ method                  │         │ token_hash              │                   │
│  │ secret                  │         │ device_info             │                   │
│  │ phone_number            │         │ ip_address              │                   │
│  │ backup_codes            │         │ location                │                   │
│  │ is_enabled              │         │ is_trusted              │                   │
│  │ verified_at             │         │ created_at              │                   │
│  │ created_at              │         │ expires_at              │                   │
│  │ updated_at              │         │ last_active_at          │                   │
│  └─────────────────────────┘         └─────────────────────────┘                   │
│                                                                                      │
│  ┌─────────────────────────┐         ┌─────────────────────────┐                   │
│  │       KYC_DATA          │         │      AUDIT_LOGS         │                   │
│  ├─────────────────────────┤         ├─────────────────────────┤                   │
│  │ id (PK)                 │         │ id (PK)                 │                   │
│  │ user_id (FK)            │         │ user_id (FK)            │                   │
│  │ tier                    │         │ action                  │                   │
│  │ full_name               │         │ entity_type             │                   │
│  │ date_of_birth           │         │ entity_id               │                   │
│  │ nationality             │         │ old_value               │                   │
│  │ address                 │         │ new_value               │                   │
│  │ id_type                 │         │ ip_address              │                   │
│  │ id_number               │         │ user_agent              │                   │
│  │ id_document_url         │         │ created_at              │                   │
│  │ selfie_url              │         └─────────────────────────┘                   │
│  │ address_proof_url       │                                                        │
│  │ verification_status     │                                                        │
│  │ verified_at             │                                                        │
│  │ rejection_reason        │                                                        │
│  │ created_at              │                                                        │
│  └─────────────────────────┘                                                        │
│                                                                                      │
└─────────────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────────────┐
│                              SUBSCRIPTIONS & BILLING                                 │
├─────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                      │
│  ┌─────────────────────────┐         ┌─────────────────────────┐                   │
│  │   SUBSCRIPTION_PLANS    │         │   USER_SUBSCRIPTIONS    │                   │
│  ├─────────────────────────┤         ├─────────────────────────┤                   │
│  │ id (PK)                 │         │ id (PK)                 │                   │
│  │ name                    │         │ user_id (FK)            │                   │
│  │ description             │         │ plan_id (FK)            │                   │
│  │ price_monthly           │         │ status                  │                   │
│  │ price_yearly            │         │ payment_provider        │                   │
│  │ features (JSON)         │         │ provider_subscription_id│                   │
│  │ is_active               │         │ current_period_start    │                   │
│  │ created_at              │         │ current_period_end      │                   │
│  └─────────────────────────┘         │ canceled_at             │                   │
│                                      │ created_at              │                   │
│                                      └─────────────────────────┘                   │
│                                                                                      │
│  ┌─────────────────────────┐                                                        │
│  │   CHALLENGE_ADD_ONS     │                                                        │
│  ├─────────────────────────┤                                                        │
│  │ id (PK)                 │                                                        │
│  │ challenge_id (FK)       │                                                        │
│  │ type (reset/extension)  │                                                        │
│  │ payment_id (FK)         │                                                        │
│  │ original_value          │                                                        │
│  │ applied_at              │                                                        │
│  │ created_at              │                                                        │
│  └─────────────────────────┘                                                        │
│                                                                                      │
└─────────────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────────────┐
│                              SOCIAL TRADING                                          │
├─────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                      │
│  ┌─────────────────────────┐         ┌─────────────────────────┐                   │
│  │    TRADER_PROFILES      │         │    TRADER_FOLLOWERS     │                   │
│  ├─────────────────────────┤         ├─────────────────────────┤                   │
│  │ id (PK)                 │         │ id (PK)                 │                   │
│  │ user_id (FK)            │         │ master_id (FK)          │                   │
│  │ display_name            │         │ follower_id (FK)        │                   │
│  │ bio                     │         │ copy_enabled            │                   │
│  │ is_public               │         │ copy_percentage         │                   │
│  │ is_verified             │         │ max_risk_per_trade      │                   │
│  │ total_followers         │         │ max_daily_loss          │                   │
│  │ total_copiers           │         │ created_at              │                   │
│  │ performance_fee         │         │ updated_at              │                   │
│  │ created_at              │         └─────────────────────────┘                   │
│  │ updated_at              │                                                        │
│  └─────────────────────────┘                                                        │
│                                                                                      │
│  ┌─────────────────────────┐         ┌─────────────────────────┐                   │
│  │      COPY_TRADES        │         │    TRADING_IDEAS        │                   │
│  ├─────────────────────────┤         ├─────────────────────────┤                   │
│  │ id (PK)                 │         │ id (PK)                 │                   │
│  │ master_trade_id (FK)    │         │ user_id (FK)            │                   │
│  │ copier_trade_id (FK)    │         │ symbol                  │                   │
│  │ follower_id (FK)        │         │ direction               │                   │
│  │ copy_ratio              │         │ analysis                │                   │
│  │ status                  │         │ chart_url               │                   │
│  │ created_at              │         │ likes_count             │                   │
│  └─────────────────────────┘         │ comments_count          │                   │
│                                      │ created_at              │                   │
│                                      └─────────────────────────┘                   │
│                                                                                      │
│  ┌─────────────────────────┐         ┌─────────────────────────┐                   │
│  │     IDEA_COMMENTS       │         │     IDEA_LIKES          │                   │
│  ├─────────────────────────┤         ├─────────────────────────┤                   │
│  │ id (PK)                 │         │ id (PK)                 │                   │
│  │ idea_id (FK)            │         │ idea_id (FK)            │                   │
│  │ user_id (FK)            │         │ user_id (FK)            │                   │
│  │ comment                 │         │ created_at              │                   │
│  │ created_at              │         └─────────────────────────┘                   │
│  └─────────────────────────┘                                                        │
│                                                                                      │
└─────────────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────────────┐
│                              ADVANCED TRADING                                        │
├─────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                      │
│  ┌─────────────────────────┐         ┌─────────────────────────┐                   │
│  │    TRADE_JOURNAL        │         │    ORDER_TEMPLATES      │                   │
│  ├─────────────────────────┤         ├─────────────────────────┤                   │
│  │ id (PK)                 │         │ id (PK)                 │                   │
│  │ trade_id (FK)           │         │ user_id (FK)            │                   │
│  │ user_id (FK)            │         │ name                    │                   │
│  │ notes                   │         │ symbol                  │                   │
│  │ setup_type              │         │ side                    │                   │
│  │ emotion                 │         │ quantity                │                   │
│  │ tags                    │         │ order_type              │                   │
│  │ screenshots (JSON)      │         │ stop_loss_pips          │                   │
│  │ rating                  │         │ take_profit_pips        │                   │
│  │ created_at              │         │ created_at              │                   │
│  │ updated_at              │         └─────────────────────────┘                   │
│  └─────────────────────────┘                                                        │
│                                                                                      │
│  ┌─────────────────────────┐         ┌─────────────────────────┐                   │
│  │    MT_CONNECTIONS       │         │    CHART_LAYOUTS        │                   │
│  ├─────────────────────────┤         ├─────────────────────────┤                   │
│  │ id (PK)                 │         │ id (PK)                 │                   │
│  │ user_id (FK)            │         │ user_id (FK)            │                   │
│  │ challenge_id (FK)       │         │ name                    │                   │
│  │ mt_account_id           │         │ layout_config (JSON)    │                   │
│  │ mt_server               │         │ is_default              │                   │
│  │ connection_status       │         │ created_at              │                   │
│  │ last_sync_at            │         │ updated_at              │                   │
│  │ created_at              │         └─────────────────────────┘                   │
│  └─────────────────────────┘                                                        │
│                                                                                      │
└─────────────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────────────┐
│                              NOTIFICATIONS                                           │
├─────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                      │
│  ┌─────────────────────────┐         ┌─────────────────────────┐                   │
│  │     NOTIFICATIONS       │         │  NOTIFICATION_SETTINGS  │                   │
│  ├─────────────────────────┤         ├─────────────────────────┤                   │
│  │ id (PK)                 │         │ id (PK)                 │                   │
│  │ user_id (FK)            │         │ user_id (FK)            │                   │
│  │ type                    │         │ email_enabled           │                   │
│  │ title                   │         │ push_enabled            │                   │
│  │ message                 │         │ sms_enabled             │                   │
│  │ data (JSON)             │         │ trade_alerts            │                   │
│  │ channel                 │         │ price_alerts            │                   │
│  │ is_read                 │         │ news_alerts             │                   │
│  │ sent_at                 │         │ marketing               │                   │
│  │ created_at              │         │ updated_at              │                   │
│  └─────────────────────────┘         └─────────────────────────┘                   │
│                                                                                      │
│  ┌─────────────────────────┐                                                        │
│  │     EMAIL_QUEUE         │                                                        │
│  ├─────────────────────────┤                                                        │
│  │ id (PK)                 │                                                        │
│  │ user_id (FK)            │                                                        │
│  │ template                │                                                        │
│  │ to_email                │                                                        │
│  │ subject                 │                                                        │
│  │ body                    │                                                        │
│  │ status                  │                                                        │
│  │ attempts                │                                                        │
│  │ sent_at                 │                                                        │
│  │ created_at              │                                                        │
│  └─────────────────────────┘                                                        │
│                                                                                      │
└─────────────────────────────────────────────────────────────────────────────────────┘
```

---

## 8. New API Endpoints

### Pro Version API Map

```
┌─────────────────────────────────────────────────────────────────────────────────────┐
│                            NEW API ENDPOINTS (v2.0)                                  │
│                            Base URL: /api/v2                                         │
└─────────────────────────────────────────────────────────────────────────────────────┘

AUTHENTICATION ENHANCEMENTS (/api/v2/auth)
├── POST   /verify-email           → Send verification email
├── POST   /verify-email/confirm   → Confirm email verification
├── POST   /2fa/setup              → Setup 2FA (TOTP/SMS)
├── POST   /2fa/verify             → Verify 2FA code
├── POST   /2fa/disable            → Disable 2FA
├── GET    /2fa/backup-codes       → Get backup codes
├── GET    /sessions               → Get active sessions
├── DELETE /sessions/:id           → Revoke session
└── DELETE /sessions/all           → Revoke all sessions

KYC (/api/v2/kyc)
├── GET    /status                 → Get KYC status
├── POST   /submit                 → Submit KYC documents
├── POST   /upload-document        → Upload ID/selfie/address proof
├── GET    /verification-status    → Check verification status
└── POST   /retry                  → Retry failed verification

SUBSCRIPTIONS (/api/v2/subscriptions)
├── GET    /plans                  → Get available subscription plans
├── POST   /subscribe              → Create subscription
├── GET    /my-subscription        → Get current subscription
├── POST   /cancel                 → Cancel subscription
├── POST   /resume                 → Resume canceled subscription
├── PUT    /change-plan            → Upgrade/downgrade plan
└── GET    /invoices               → Get billing history

CHALLENGE ADD-ONS (/api/v2/challenges)
├── POST   /:id/reset              → Reset challenge (paid)
├── POST   /:id/extend             → Extend time (paid)
├── POST   /:id/upgrade            → Upgrade account size
└── GET    /:id/add-on-history     → Get add-on purchase history

COPY TRADING (/api/v2/copy-trading)
├── GET    /traders                → Get copy-able traders
├── GET    /traders/:id            → Get trader profile
├── GET    /traders/:id/stats      → Get trader statistics
├── POST   /follow/:id             → Follow a trader
├── DELETE /follow/:id             → Unfollow a trader
├── PUT    /follow/:id/settings    → Update copy settings
├── GET    /my-followers           → Get your followers
├── GET    /my-copies              → Get copied trades
└── GET    /copy-history           → Get copy trade history

TRADER PROFILES (/api/v2/profiles)
├── GET    /me                     → Get my trader profile
├── PUT    /me                     → Update profile
├── GET    /:id                    → Get public profile
├── GET    /:id/trades             → Get trader's trade history
├── GET    /:id/equity-curve       → Get equity curve data
└── POST   /:id/review             → Submit review

TRADING IDEAS (/api/v2/ideas)
├── GET    /                       → Get trading ideas feed
├── POST   /                       → Create trading idea
├── GET    /:id                    → Get idea details
├── POST   /:id/like               → Like an idea
├── DELETE /:id/like               → Unlike an idea
├── GET    /:id/comments           → Get comments
├── POST   /:id/comments           → Add comment
└── DELETE /:id/comments/:cid      → Delete comment

TRADE JOURNAL (/api/v2/journal)
├── GET    /                       → Get journal entries
├── POST   /trades/:id/notes       → Add notes to trade
├── PUT    /trades/:id/notes       → Update notes
├── GET    /analytics              → Get journal analytics
├── GET    /export                 → Export journal (PDF/CSV)
└── POST   /import                 → Import trades from MT4/MT5

ORDER TEMPLATES (/api/v2/templates)
├── GET    /                       → Get order templates
├── POST   /                       → Create template
├── PUT    /:id                    → Update template
└── DELETE /:id                    → Delete template

ADVANCED ORDERS (/api/v2/orders)
├── POST   /oco                    → Create OCO order
├── POST   /bracket                → Create bracket order
├── POST   /trailing-stop          → Create trailing stop
└── PUT    /:id/trailing-stop      → Update trailing stop

NOTIFICATIONS (/api/v2/notifications)
├── GET    /                       → Get notifications
├── PUT    /:id/read               → Mark as read
├── PUT    /read-all               → Mark all as read
├── GET    /settings               → Get notification settings
├── PUT    /settings               → Update notification settings
└── POST   /register-device        → Register push device

MT4/MT5 INTEGRATION (/api/v2/mt)
├── POST   /connect                → Connect MT account
├── DELETE /disconnect             → Disconnect MT account
├── GET    /status                 → Get connection status
├── POST   /sync                   → Force sync trades
└── GET    /accounts               → Get linked accounts

AFFILIATE ENHANCED (/api/v2/affiliates)
├── GET    /dashboard              → Get affiliate dashboard
├── GET    /sub-affiliates         → Get sub-affiliate tree
├── GET    /commissions            → Get commission history
├── GET    /materials              → Get marketing materials
├── POST   /payout-request         → Request commission payout
└── GET    /analytics              → Get referral analytics
```

---

## 9. Infrastructure Upgrades

### Scalable Architecture

```
┌─────────────────────────────────────────────────────────────────────────────────────┐
│                         INFRASTRUCTURE ARCHITECTURE (v2.0)                           │
└─────────────────────────────────────────────────────────────────────────────────────┘

                                    ┌─────────────────┐
                                    │     Users       │
                                    │   (Web/Mobile)  │
                                    └────────┬────────┘
                                             │
                                             ▼
                              ┌─────────────────────────┐
                              │      CloudFlare CDN     │
                              │                         │
                              │  • DDoS Protection      │
                              │  • SSL Termination      │
                              │  • Static Asset Cache   │
                              │  • WAF                  │
                              └────────────┬────────────┘
                                           │
                              ┌────────────┴────────────┐
                              │                         │
                              ▼                         ▼
               ┌─────────────────────────┐  ┌─────────────────────────┐
               │    Load Balancer        │  │    API Gateway          │
               │    (Web Traffic)        │  │    (API Traffic)        │
               │                         │  │                         │
               │  • Round robin          │  │  • Rate limiting        │
               │  • Health checks        │  │  • Auth validation      │
               │  • SSL                  │  │  • Request routing      │
               └────────────┬────────────┘  └────────────┬────────────┘
                            │                            │
         ┌──────────────────┴──────────────────┐         │
         │                  │                  │         │
         ▼                  ▼                  ▼         ▼
┌─────────────────┐ ┌─────────────────┐ ┌─────────────────────────────────┐
│   Web Server 1  │ │   Web Server 2  │ │        API Servers              │
│   (Frontend)    │ │   (Frontend)    │ │                                 │
│                 │ │                 │ │  ┌─────────┐ ┌─────────┐       │
│  • React SPA    │ │  • React SPA    │ │  │ API 1   │ │ API 2   │       │
│  • Nginx        │ │  • Nginx        │ │  │ (Flask) │ │ (Flask) │       │
│                 │ │                 │ │  └─────────┘ └─────────┘       │
└─────────────────┘ └─────────────────┘ │                                 │
                                        │  • Gunicorn                     │
                                        │  • Auto-scaling                 │
                                        └────────────────┬────────────────┘
                                                         │
                    ┌────────────────────────────────────┼────────────────────────────────────┐
                    │                                    │                                    │
                    ▼                                    ▼                                    ▼
         ┌─────────────────────┐            ┌─────────────────────┐            ┌─────────────────────┐
         │      Redis          │            │    PostgreSQL       │            │    Task Queue       │
         │      Cluster        │            │    (Primary)        │            │    (Celery)         │
         │                     │            │                     │            │                     │
         │  • Session cache    │            │  ┌───────────────┐  │            │  • Email sending    │
         │  • Rate limiting    │            │  │   Read        │  │            │  • Payout process   │
         │  • Price cache      │            │  │   Replicas    │  │            │  • Report gen       │
         │  • Real-time data   │            │  │   (2x)        │  │            │  • Data sync        │
         │                     │            │  └───────────────┘  │            │  • Notifications    │
         └─────────────────────┘            └─────────────────────┘            └─────────────────────┘
                    │                                    │                                    │
                    │                                    │                                    │
                    └────────────────────────────────────┼────────────────────────────────────┘
                                                         │
                              ┌───────────────────────────┴───────────────────────────┐
                              │                                                       │
                              ▼                                                       ▼
               ┌─────────────────────────┐                         ┌─────────────────────────┐
               │    External Services    │                         │     Monitoring Stack    │
               │                         │                         │                         │
               │  • SendGrid (Email)     │                         │  • Sentry (Errors)      │
               │  • Twilio (SMS)         │                         │  • Datadog (APM)        │
               │  • Jumio (KYC)          │                         │  • ELK (Logs)           │
               │  • MetaAPI (MT4/5)      │                         │  • Grafana (Metrics)    │
               │  • PayPal/Stripe        │                         │  • PagerDuty (Alerts)   │
               └─────────────────────────┘                         └─────────────────────────┘
```

---

## 10. Implementation Roadmap

### Phased Rollout Plan

```
┌─────────────────────────────────────────────────────────────────────────────────────┐
│                         IMPLEMENTATION ROADMAP                                       │
└─────────────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────────────┐
│  PHASE 1: FOUNDATION (Month 1-2)                                    Priority: P1    │
│  ─────────────────────────────────                                                  │
│                                                                                      │
│  Week 1-2: Database & Infrastructure                                                │
│  ├── Migrate SQLite → PostgreSQL                                                    │
│  ├── Setup Redis cluster                                                            │
│  ├── Configure Celery task queue                                                    │
│  └── Setup basic monitoring (Sentry)                                                │
│                                                                                      │
│  Week 3-4: Email System                                                             │
│  ├── Integrate SendGrid                                                             │
│  ├── Email verification flow                                                        │
│  ├── Transactional email templates                                                  │
│  └── Email queue system                                                             │
│                                                                                      │
│  Week 5-6: Security Enhancements                                                    │
│  ├── 2FA implementation (TOTP)                                                      │
│  ├── Session management                                                             │
│  ├── Rate limiting                                                                  │
│  └── Audit logging                                                                  │
│                                                                                      │
│  Week 7-8: KYC System                                                               │
│  ├── KYC tier structure                                                             │
│  ├── Document upload system                                                         │
│  ├── Jumio/Onfido integration                                                       │
│  └── Admin verification queue                                                       │
│                                                                                      │
│  Deliverables:                                                                       │
│  ✓ Production-ready database                                                         │
│  ✓ Email notifications working                                                       │
│  ✓ 2FA authentication                                                                │
│  ✓ Basic KYC verification                                                            │
│                                                                                      │
└─────────────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────────────┐
│  PHASE 2: REVENUE EXPANSION (Month 2-3)                             Priority: P2    │
│  ──────────────────────────────────────                                             │
│                                                                                      │
│  Week 1-2: Subscription System                                                      │
│  ├── Subscription plans model                                                       │
│  ├── Stripe/PayPal recurring billing                                                │
│  ├── Subscription management UI                                                     │
│  └── Billing dashboard                                                              │
│                                                                                      │
│  Week 3-4: Challenge Add-ons                                                        │
│  ├── Challenge reset feature                                                        │
│  ├── Time extension purchase                                                        │
│  ├── Account upgrade flow                                                           │
│  └── Add-on payment integration                                                     │
│                                                                                      │
│  Week 5-6: Enhanced Affiliate                                                       │
│  ├── Multi-tier commission structure                                                │
│  ├── Affiliate dashboard                                                            │
│  ├── Marketing materials portal                                                     │
│  └── Commission payout system                                                       │
│                                                                                      │
│  Deliverables:                                                                       │
│  ✓ 4 subscription tiers live                                                         │
│  ✓ Challenge reset/extend working                                                    │
│  ✓ 2-tier affiliate program                                                          │
│                                                                                      │
└─────────────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────────────┐
│  PHASE 3: TRADING ENHANCEMENTS (Month 3-4)                          Priority: P2    │
│  ─────────────────────────────────────────                                          │
│                                                                                      │
│  Week 1-3: Advanced Orders                                                          │
│  ├── Trailing stop loss                                                             │
│  ├── OCO orders                                                                     │
│  ├── Bracket orders                                                                 │
│  ├── One-click trading                                                              │
│  └── Order templates                                                                │
│                                                                                      │
│  Week 4-5: Trade Journal                                                            │
│  ├── Journal entry system                                                           │
│  ├── Trade tagging & notes                                                          │
│  ├── Performance analytics                                                          │
│  └── Export functionality                                                           │
│                                                                                      │
│  Week 6-8: MT4/MT5 Integration                                                      │
│  ├── MetaAPI setup                                                                  │
│  ├── Account connection flow                                                        │
│  ├── Trade synchronization                                                          │
│  └── Real execution pipeline                                                        │
│                                                                                      │
│  Deliverables:                                                                       │
│  ✓ Professional order types                                                          │
│  ✓ Trade journaling system                                                           │
│  ✓ MT5 integration (optional)                                                        │
│                                                                                      │
└─────────────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────────────┐
│  PHASE 4: SOCIAL FEATURES (Month 4-5)                               Priority: P2    │
│  ────────────────────────────────────                                               │
│                                                                                      │
│  Week 1-3: Trader Profiles                                                          │
│  ├── Public profile pages                                                           │
│  ├── Statistics & equity curves                                                     │
│  ├── Badges & achievements                                                          │
│  └── Profile verification                                                           │
│                                                                                      │
│  Week 4-6: Copy Trading                                                             │
│  ├── Follow system                                                                  │
│  ├── Copy settings (ratio, risk)                                                    │
│  ├── Copy trade execution                                                           │
│  └── Performance fee calculation                                                    │
│                                                                                      │
│  Week 7-8: Social Feed                                                              │
│  ├── Trading ideas posting                                                          │
│  ├── Like & comment system                                                          │
│  ├── Trending ideas                                                                 │
│  └── Notification integration                                                       │
│                                                                                      │
│  Deliverables:                                                                       │
│  ✓ Full trader profiles                                                              │
│  ✓ Copy trading live                                                                 │
│  ✓ Social trading feed                                                               │
│                                                                                      │
└─────────────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────────────┐
│  PHASE 5: MOBILE & SCALE (Month 5-6)                                Priority: P3    │
│  ───────────────────────────────────                                                │
│                                                                                      │
│  Week 1-6: Mobile Application                                                       │
│  ├── React Native setup                                                             │
│  ├── Core trading features                                                          │
│  ├── Push notifications                                                             │
│  ├── Biometric authentication                                                       │
│  └── App store submission                                                           │
│                                                                                      │
│  Week 7-8: Scaling & Optimization                                                   │
│  ├── Load balancer setup                                                            │
│  ├── Database read replicas                                                         │
│  ├── CDN optimization                                                               │
│  └── Performance tuning                                                             │
│                                                                                      │
│  Deliverables:                                                                       │
│  ✓ iOS & Android apps                                                                │
│  ✓ Horizontally scalable infrastructure                                              │
│  ✓ Production-ready platform                                                         │
│                                                                                      │
└─────────────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────────────┐
│                              ESTIMATED RESOURCES                                     │
├───────────────────────────────────┬─────────────────────────────────────────────────┤
│  Phase                            │  Team / Time                                    │
├───────────────────────────────────┼─────────────────────────────────────────────────┤
│  Phase 1: Foundation              │  2 Backend + 1 DevOps = 8 weeks                │
│  Phase 2: Revenue                 │  2 Backend + 1 Frontend = 6 weeks              │
│  Phase 3: Trading                 │  2 Full-stack = 8 weeks                        │
│  Phase 4: Social                  │  2 Full-stack + 1 Frontend = 8 weeks           │
│  Phase 5: Mobile                  │  2 Mobile + 1 Backend = 8 weeks                │
├───────────────────────────────────┼─────────────────────────────────────────────────┤
│  TOTAL                            │  ~6 months with dedicated team                 │
└───────────────────────────────────┴─────────────────────────────────────────────────┘
```

---

## Summary

This document outlines the complete upgrade path for TradeSense from version 1.0 to a professional-grade trading platform (v2.0), including:

- **Enhanced Security**: 2FA, KYC/AML, session management
- **Revenue Expansion**: Subscriptions, add-ons, multi-tier affiliate
- **Professional Trading**: MT4/MT5 integration, advanced orders, trade journal
- **Social Features**: Copy trading, trader profiles, social feed
- **Scalable Infrastructure**: PostgreSQL, Redis, load balancing, CDN
- **Mobile Applications**: iOS and Android native apps

The implementation is structured in 5 phases over approximately 6 months, prioritized by business impact and technical dependencies.

---

*Document generated: December 2024*
*Version: 2.0 Roadmap*
